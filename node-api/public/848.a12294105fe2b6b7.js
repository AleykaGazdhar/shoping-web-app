"use strict";(self.webpackChunkeqnaa3=self.webpackChunkeqnaa3||[]).push([[848],{7848:(M,u,l)=>{l.r(u),l.d(u,{PaymentGatewayModule:()=>b});var m=l(6638),e=l(5e3),p=l(2382),C=l(8086);let P=(()=>{class a{constructor(){this.payPalConfig={price:9.99,currency:"USD"}}ngOnInit(){}}return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-paypal"]],decls:19,vars:1,consts:[[1,"container","h-100"],[1,"row","mt-4"],[1,"col-md-12"],[1,"card","h-100","p-5","m-auto","w-50"],[1,"card-body"],[1,"row"],[1,"col-md-4"],[1,"col-md-8"],["tye","text","name","price",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","pt-3","m-auto"],[1,"pt-3"],["childRef",""]],template:function(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"div",0)(1,"h2"),e._uU(2,"Paypal Gateway"),e.qZA(),e._UZ(3,"hr"),e.TgZ(4,"div",1)(5,"div",2)(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6)(10,"label")(11,"b"),e._uU(12,"Amount in USD:"),e.qZA()()(),e.TgZ(13,"div",7)(14,"input",8),e.NdJ("ngModelChange",function(r){return t.payPalConfig.price=r})("ngModelChange",function(){return e.CHM(i),e.MAs(18).initConfig(t.payPalConfig)}),e.qZA()()(),e.TgZ(15,"div",9)(16,"div",2),e._UZ(17,"app-paypal-library",10,11),e.qZA()()()()()()()}2&n&&(e.xp6(14),e.Q6J("ngModel",t.payPalConfig.price))},directives:[p.Fj,p.JJ,p.On,C.w],styles:[""]}),a})();var d=l(9745),y=l(2290),Z=l(6405),g=l(9808),c=l(337),h=l(3358);class f{constructor(){this.fullName="",this.amount="0",this.email="",this.razorpayOrderId="",this.razorpayPaymentId=""}}let v=(()=>{class a{constructor(n,t,i,o){this.globalService=n,this.toastr=t,this.paymentService=i,this.spinner=o,this.rayzorPayConfig=new f,this.validation={email:!1},this.required={fullName:"",amount:"",email:""},this.RAZORPAY_OPTIONS={key:"rzp_test_Cl5FzNaTJyToxF",amount:"",name:"Novopay",order_id:"",description:"Load Wallet",image:"https://livestatic.novopay.in/resources/img/nodeapp/img/Logo_NP.jpg",handler:r=>{},prefill:{name:"",email:"",contact:"",method:""},modal:{},theme:{color:"#0096C5"}}}ngOnInit(){}checkEmailvalid(n,t){const i=this.globalService.patternMatchRegex(n,t);this.validation[t]=i}razorPay(){let n=Object.keys(this.required),t=Object.assign({},this.rayzorPayConfig);n.filter(o=>!t[o]).length?this.toastr.error("Please fill the required fields","error"):(this.spinner.show(),t.amount=Number(t.amount).toFixed(2),this.paymentService.razorPayCreateOrder(t).subscribe(o=>{this.spinner.hide(),this.RAZORPAY_OPTIONS.key=o.razor_key_id,this.RAZORPAY_OPTIONS.amount=o.order.amount,this.RAZORPAY_OPTIONS.name=this.rayzorPayConfig.fullName,this.RAZORPAY_OPTIONS.order_id=o.order.id,this.RAZORPAY_OPTIONS.email=this.rayzorPayConfig.email,this.RAZORPAY_OPTIONS.handler=this.razorPaySuccessHandler.bind(this),this.rzp1=new Razorpay(this.RAZORPAY_OPTIONS),this.rzp1.open()}))}razorPaySuccessHandler(n){if(n&&n.razorpay_payment_id){const t=Object.assign({},this.rayzorPayConfig);t.razorpayOrderId=n.razorpay_order_id,t.razorpayPaymentId=n.razorpay_payment_id,t.amount=Number(t.amount).toFixed(2),this.toastr.success("Payment has been done Successfully"),this.toastr.success("Payment has been done Successfully"),this.savePaymentData(t)}else this.toastr.error("Payment Failed")}savePaymentData(n){const t=this;this.spinner.show(),this.paymentService.razorPayOrdayPayment(n).subscribe(o=>{200===o.status?(t.toastr.success("Payment has been succesfully.","Success!"),this.rayzorPayConfig=new f,this.spinner.hide()):(this.spinner.hide(),this.toastr.error("Payment Failed"))},o=>{console.log("error: ",o),this.spinner.hide()})}}return a.\u0275fac=function(n){return new(n||a)(e.Y36(d.Uh),e.Y36(y._W),e.Y36(d.te),e.Y36(Z.t2))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-razorpay"]],decls:52,vars:6,consts:[[1,"container","h-100"],[1,"row","mt-4"],[1,"col-md-12"],[1,"card","h-100","m-auto","w-50"],[1,"card-body"],[1,"row"],[1,"form-group","mb-3"],[1,"mb-2"],[3,"ngClass"],["type","text","characterOnly","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","numbersOnly","",1,"form-control",3,"ngModel","ngModelChange"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"row","pt-3","m-auto"],[1,"mb-5","mt-4"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"h2"),e._uU(2,"Razorpay Gateway"),e.qZA(),e._UZ(3,"hr"),e.TgZ(4,"div",1)(5,"div",2)(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",2)(10,"label")(11,"b"),e._uU(12,"Amount in USD:"),e.qZA()()(),e.TgZ(13,"div",2)(14,"div",6)(15,"label",7),e._uU(16,"Full Name"),e.TgZ(17,"span",8),e._uU(18,"*"),e.qZA()(),e.TgZ(19,"input",9),e.NdJ("ngModelChange",function(o){return t.rayzorPayConfig.fullName=o}),e.qZA()(),e.TgZ(20,"div",6)(21,"label",7),e._uU(22,"Amount"),e.TgZ(23,"span",8),e._uU(24,"*"),e.qZA()(),e.TgZ(25,"input",10),e.NdJ("ngModelChange",function(o){return t.rayzorPayConfig.amount=o}),e.qZA()(),e.TgZ(26,"div",6)(27,"label",7),e._uU(28,"Email"),e.TgZ(29,"span",8),e._uU(30,"*"),e.qZA()(),e.TgZ(31,"input",11),e.NdJ("ngModelChange",function(o){return t.rayzorPayConfig.email=o})("ngModelChange",function(){return t.checkEmailvalid(t.rayzorPayConfig.email,"email")}),e.qZA()(),e.TgZ(32,"div",6)(33,"button",12),e.NdJ("click",function(){return t.razorPay()}),e._uU(34,"Pay"),e.qZA()()()(),e.TgZ(35,"div",13),e._UZ(36,"div",2),e.qZA()()()(),e.TgZ(37,"div")(38,"ul",14)(39,"li"),e._uU(40,"Need to create account on razorpay => "),e.TgZ(41,"ul")(42,"li"),e._uU(43,"After the create account, find the key and add in your app"),e.qZA(),e.TgZ(44,"li"),e._uU(45,"after that need to done some configuration in ts file."),e.qZA(),e.TgZ(46,"li"),e._uU(47,"after that, need to click on button and create the order in api side"),e.qZA(),e.TgZ(48,"li"),e._uU(49,"after the create order need to send the responsive to UI and performing some queries and send back resposnce to Api"),e.qZA(),e.TgZ(50,"li"),e._uU(51,"in Api side need to capture the amount, after that we can save the data in DB"),e.qZA()()()()()()()),2&n&&(e.xp6(17),e.Q6J("ngClass",t.rayzorPayConfig.fullName?"text-primary":"text-danger"),e.xp6(2),e.Q6J("ngModel",t.rayzorPayConfig.fullName),e.xp6(4),e.Q6J("ngClass",t.rayzorPayConfig.amount?"text-primary":"text-danger"),e.xp6(2),e.Q6J("ngModel",t.rayzorPayConfig.amount),e.xp6(4),e.Q6J("ngClass",t.rayzorPayConfig.email&&t.validation.email?"text-primary":"text-danger"),e.xp6(2),e.Q6J("ngModel",t.rayzorPayConfig.email))},directives:[g.mk,p.Fj,c.y,p.JJ,p.On,h.Y],styles:[""]}),a})();class _{constructor(){this.fullName="",this.email="",this.amount=""}}const T=[{path:"paypal-pay",component:P,pathMatch:"full"},{path:"razor-pay",component:v,pathMatch:"Full"},{path:"stripe-pay",component:(()=>{class a{constructor(n,t,i,o){this.globalService=n,this.toastr=t,this.paymentService=i,this.router=o,this.stripePayConfig=new _,this.validation={email:""},this.required={fullName:"",email:"",amount:""},this.strikeCheckout=null,this.handler=null}ngOnInit(){this.loadStripe()}checkEmailvalid(n,t){const i=this.globalService.patternMatchRegex(n,t);this.validation[t]=i}stripePayWithSession(){let n=Object.keys(this.required),t=Object.assign({},this.stripePayConfig);n.filter(r=>!t[r]).length?this.toastr.error("Please fill the required fields","error"):this.paymentService.stripePaymentWithSession(t).subscribe(r=>{200===r.status?(console.log(r),r=r.data,window.location.href=r.url):this.toastr.error(r.message,"Error")},r=>{console.log(r.message,"err"),this.toastr.error(r.message,"Error")})}loadStripe(){if(console.log("lod"),!window.document.getElementById("stripe-script")){var n=window.document.createElement("script");n.id="stripe-script",n.type="text/javascript",n.src="https://checkout.stripe.com/checkout.js",window.document.body.appendChild(n)}}pay(n){}}return a.\u0275fac=function(n){return new(n||a)(e.Y36(d.Uh),e.Y36(y._W),e.Y36(d.te),e.Y36(m.F0))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-stripe"]],decls:39,vars:6,consts:[[1,"container","h-100"],[1,"row","mt-4"],[1,"col-md-6"],[1,"card","h-100"],[1,"card-body"],[1,"form-group","mb-3"],[1,"mb-2"],[3,"ngClass"],["type","text","characterOnly","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","numbersOnly","",1,"form-control",3,"ngModel","ngModelChange"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"mt-5"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"h2"),e._uU(2,"Stripe Payment Gateway"),e.qZA(),e._UZ(3,"hr"),e.TgZ(4,"div",1)(5,"div",2)(6,"div",3)(7,"div",4)(8,"h3"),e._uU(9,"Pay with session"),e.qZA(),e.TgZ(10,"label")(11,"b"),e._uU(12,"Amount in INR:"),e.qZA()(),e.TgZ(13,"div",5)(14,"label",6),e._uU(15,"Full Name"),e.TgZ(16,"span",7),e._uU(17,"*"),e.qZA()(),e.TgZ(18,"input",8),e.NdJ("ngModelChange",function(o){return t.stripePayConfig.fullName=o}),e.qZA()(),e.TgZ(19,"div",5)(20,"label",6),e._uU(21,"Amount"),e.TgZ(22,"span",7),e._uU(23,"*"),e.qZA()(),e.TgZ(24,"input",9),e.NdJ("ngModelChange",function(o){return t.stripePayConfig.amount=o}),e.qZA()(),e.TgZ(25,"div",5)(26,"label",6),e._uU(27,"Email"),e.TgZ(28,"span",7),e._uU(29,"*"),e.qZA()(),e.TgZ(30,"input",10),e.NdJ("ngModelChange",function(o){return t.stripePayConfig.email=o})("ngModelChange",function(){return t.checkEmailvalid(t.stripePayConfig.email,"email")}),e.qZA()(),e.TgZ(31,"div",5)(32,"button",11),e.NdJ("click",function(){return t.stripePayWithSession()}),e._uU(33,"Pay"),e.qZA()(),e.TgZ(34,"p",12),e._uU(35," Try it out using the test card number "),e.TgZ(36,"b"),e._uU(37,"4242 4242 4242 4242"),e.qZA(),e._uU(38,", a random three-digit CVC number, any expiration date in the future, and a random five-digit U.S. ZIP code. "),e.qZA()()()()()()),2&n&&(e.xp6(16),e.Q6J("ngClass",t.stripePayConfig.fullName?"text-primary":"text-danger"),e.xp6(2),e.Q6J("ngModel",t.stripePayConfig.fullName),e.xp6(4),e.Q6J("ngClass",t.stripePayConfig.amount?"text-primary":"text-danger"),e.xp6(2),e.Q6J("ngModel",t.stripePayConfig.amount),e.xp6(4),e.Q6J("ngClass",t.stripePayConfig.email&&t.validation.email?"text-primary":"text-danger"),e.xp6(2),e.Q6J("ngModel",t.stripePayConfig.email))},directives:[g.mk,p.Fj,c.y,p.JJ,p.On,h.Y],styles:[""]}),a})(),pathMatch:"full"}];let A=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[m.Bz.forChild(T)],m.Bz]}),a})(),b=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[d.eY,A]]}),a})()}}]);