"use strict";(self.webpackChunkshopping_website=self.webpackChunkshopping_website||[]).push([[83],{9083:(H,h,s)=>{s.r(h),s.d(h,{ProductsModule:()=>j});var p=s(6895),l=s(1983),m=s(388),g=s(5415),P=s(7579),_=s(2340),c=s(433);class b{constructor(){this.productname="",this.productprice="",this.productmargin="",this.Productdescription="",this.status=1,this.role=_.N.role.userRole}}var t=s(1571),x=s(7185),f=s(1300),v=s(334),T=s(7151);const C=["ProductModal"],M=["deleteProductrModal"];function A(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"tr",44)(1,"th",45),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"img",46),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td")(14,"div",47)(15,"input",48),t.NdJ("change",function(){const d=t.CHM(o).$implicit,u=t.oxw();return t.KtG(u.changeUserStatus(d))})("ngModelChange",function(n){const u=t.CHM(o).$implicit;return t.KtG(u.status=n)}),t.qZA(),t.TgZ(16,"label",49),t._uU(17),t.qZA()()(),t.TgZ(18,"td",8)(19,"div",50)(20,"button",51),t.NdJ("click",function(){const d=t.CHM(o).$implicit,u=t.oxw();return t.KtG(u.showeModel(d))}),t._UZ(21,"i",52),t.qZA(),t.TgZ(22,"button",53),t.NdJ("click",function(){const d=t.CHM(o).$implicit,u=t.oxw();return t.KtG(u.showUserDeleteModal(d))}),t._UZ(23,"i",54),t.qZA()()()()}if(2&e){const o=i.$implicit,r=i.index;t.xp6(2),t.Oqu(r+1),t.xp6(2),t.Oqu(null==o?null:o.productname),t.xp6(2),t.Q6J("src",null==o?null:o.productImg,t.LSH),t.xp6(2),t.Oqu(null==o?null:o.productprice),t.xp6(2),t.Oqu(null==o?null:o.productmargin),t.xp6(2),t.Oqu(null==o?null:o.Productdescription),t.xp6(3),t.Q6J("ngModel",o.status),t.xp6(2),t.Oqu(o.status?"On":"Off")}}function U(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"Product Name is Required."),t.qZA())}function q(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"MaxLength is 20."),t.qZA())}function y(e,i){if(1&e&&(t.TgZ(0,"p",55),t.YNc(1,U,2,0,"span",56),t.YNc(2,q,2,0,"span",56),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.formError.productname.errors.required),t.xp6(1),t.Q6J("ngIf",o.formError.productname.errors.maxlength)}}function w(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"Product Price is Required."),t.qZA())}function k(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"MaxLength is 5."),t.qZA())}function I(e,i){if(1&e&&(t.TgZ(0,"p",55),t.YNc(1,w,2,0,"span",56),t.YNc(2,k,2,0,"span",56),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.formError.productprice.errors.required),t.xp6(1),t.Q6J("ngIf",o.formError.productprice.errors.maxlength)}}function J(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"Product Margin is Required."),t.qZA())}function O(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"MaxLength is 5."),t.qZA())}function N(e,i){if(1&e&&(t.TgZ(0,"p",55),t.YNc(1,J,2,0,"span",56),t.YNc(2,O,2,0,"span",56),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.formError.productmargin.errors.required),t.xp6(1),t.Q6J("ngIf",o.formError.productmargin.errors.maxlength)}}function F(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"Product Description is Required."),t.qZA())}function E(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"MaxLength is 300."),t.qZA())}function L(e,i){if(1&e&&(t.TgZ(0,"p",55),t.YNc(1,F,2,0,"span",56),t.YNc(2,E,2,0,"span",56),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.formError.Productdescription.errors.required),t.xp6(1),t.Q6J("ngIf",o.formError.Productdescription.errors.maxlength)}}function Q(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"div",57)(1,"div",32)(2,"div",58),t._uU(3," Choose Photo "),t.TgZ(4,"input",59),t.NdJ("change",function(n){t.CHM(o);const d=t.oxw();return t.KtG(d.onFileSelected(n))}),t.qZA()()()()}}function Y(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"div",57),t._UZ(1,"div",60),t.TgZ(2,"div",61)(3,"span",62),t.NdJ("click",function(n){t.CHM(o);const d=t.oxw();return t.KtG(d.onFileSelected(n))}),t.qZA(),t.TgZ(4,"div",63),t._UZ(5,"img",64),t.qZA()()()}if(2&e){const o=t.oxw();t.xp6(5),t.Q6J("src",o.productForm.value.productImg,t.LSH)}}const Z=function(){return{backdrop:"static",keyboard:!1,animated:!0}},S=[{path:"",component:(()=>{class e{constructor(o,r,n,d,u,a,G){this.fb=o,this.toastr=r,this.router=n,this.globalService=d,this.spinner=u,this.usersService=a,this.productService=G,this.productForm=new c.cw({}),this.productnfo=new b,this.userRoles=_.N.role,this.ProductModal=m.oB,this.productsList=[],this.datatableElement=g.G,this.dtOptions={},this.dtTrigger=new P.x,this.deleteProductrModal=m.oB}ngOnInit(){this.dtOptions={responsive:!0,scrollX:!0,scrollY:"350px",scrollCollapse:!0,pageLength:10,columnDefs:[]},this.userRoles=Object.keys(this.userRoles),this.productFormValidation(),this.getProductsList()}productFormValidation(){this.productForm=this.fb.group({_id:"",status:1,productname:["",[c.kI.required,c.kI.maxLength(50)]],productprice:["",[c.kI.required,c.kI.maxLength(5),c.kI.minLength(1)]],productmargin:["",[c.kI.required,c.kI.maxLength(5)]],productImg:["",[c.kI.required]],Productdescription:["",[c.kI.required,c.kI.maxLength(500)]]})}ngAfterViewInit(){this.dtTrigger.next("")}getProductsList(){this.spinner.show(),this.productService.getProductsList({}).subscribe({next:o=>{200==o.status&&this.datatableElement.dtInstance.then(r=>{r.destroy(),this.dtTrigger.next(""),this.productsList=o.data,this.spinner.hide()})},error:o=>{this.spinner.hide(),this.toastr.error(o.message,"Error!")}})}changeUserStatus(o){this.productService.addProduct({_id:o._id,status:o.status?1:0}).subscribe(n=>{if(200===n.status){n=n.data,this.spinner.hide(),this.toastr.success("Product status has been changed successfully.","Success!");let d=this.productsList.findIndex(u=>u._id===n._id);d&&(this.productsList[d].status=n.status)}},n=>{this.spinner.hide(),this.toastr.error(n.message,"Error!")})}closeModel(){this.ProductModal.hide(),this.deleteProductrModal.hide()}showeModel(o){this.productFormValidation(),o&&this.productForm.reset(o),this.ProductModal.show()}get formError(){return this.productForm.controls}addProduct(){console.log(this.productForm.value),this.productService.addProduct(this.productForm.value).subscribe(o=>{this.spinner.show(),200==o.status&&(this.toastr.info(o.message,"Success! Product is added."),this.ProductModal.hide(),this.spinner.hide(),this.getProductsList())},o=>{this.spinner.hide(),this.toastr.error(o.message,"Error!")})}showUserDeleteModal(o){this.productnfo=Object.assign({},o),this.deleteProductrModal.show()}deleteProduct(){this.spinner.show(),this.productService.deleteProduct(this.productnfo).subscribe(o=>{200===o.status&&(this.closeModel(),this.spinner.hide(),this.getProductsList(),this.toastr.success("Product deleted successfully.","Success"))},o=>{this.closeModel(),this.spinner.hide(),this.toastr.error("There are some server error. Please check connection.","Error")})}onFileSelected(o){if(this.productForm.get("productImg").setValue(""),o.target.files&&o.target.files.length){this.spinner.show();const d=new FileReader,u=o.target.files[0];"image"===u.type.split("/")[0]?(console.log("11111111111111111"),d.readAsDataURL(u),d.onload=()=>{let a=d.result;console.log("base64Image========",a),this.productForm.get("productImg").setValue(a),this.spinner.hide()}):(console.log("222222222222222222"),this.spinner.hide(),this.toastr.error("Please select product photo.","Validation"),$("input[type=file]").val(""))}else $("input[type=file]").val("")}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(c.qu),t.Y36(x._W),t.Y36(l.F0),t.Y36(f.Uh),t.Y36(v.t2),t.Y36(f.fz),t.Y36(T.M))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-products"]],viewQuery:function(o,r){if(1&o&&(t.Gf(C,5),t.Gf(g.G,5),t.Gf(M,5)),2&o){let n;t.iGM(n=t.CRH())&&(r.ProductModal=n.first),t.iGM(n=t.CRH())&&(r.datatableElement=n.first),t.iGM(n=t.CRH())&&(r.deleteProductrModal=n.first)}},decls:114,vars:24,consts:[[1,"row","text-right","p-2"],[1,"col-12"],[1,"nav-item","btn","btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],[1,"container-fluid","app-user","bg-white","p-5"],[1,"table-responsive-lg"],["datatable","",1,"table","table-bordered","table-hover","table-striped",2,"width","100%",3,"dtOptions","dtTrigger"],[1,"text-nowrap","text-primary"],[1,"text-center"],[1,"text-wrap"],["class"," border",4,"ngFor","ngForOf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade",3,"config"],["ProductModal","bs-modal"],["role","document",1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"fa","fa-pencil"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup"],[1,"row","mb-3"],[1,"col-md-3"],["for","productName",1,"col-form-label"],[1,"col-md-9"],["type","text","id","ProductName","autocomplete","off","formControlName","productname",1,"form-control"],["class","alert alert-danger mt-1",4,"ngIf"],["for","productprice",1,"col-form-label"],["type","text","id","productPrice","autocomplete","off","formControlName","productprice",1,"form-control"],["for","productmargin",1,"col-form-label"],["type","text","id","productMargin","autocomplete","off","formControlName","productmargin",1,"form-control"],[1,"col-md-12"],["for","ProductDescription",1,"col-form-label"],["id","ProductDescription","rows","3","autocomplete","off","formControlName","Productdescription",1,"form-control"],["class","row mb-3 pt-3",4,"ngIf"],[1,"modal-footer","border-top-0","d-flex","justify-content-start"],["type","button","type","submit",1,"btn","btn-primary","me-1",3,"disabled","click"],["type","button",1,"btn","btn-danger",3,"click"],[3,"innerHtml"],["deleteProductrModal","bs-modal"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"fa","fa-trash"],["type","button",1,"btn","btn-primary",3,"click"],[1,"border"],["scope","row"],["width","150px","height","100px",3,"src"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","flexSwitchCheckDefault",1,"form-check-input",3,"ngModel","change","ngModelChange"],["for","flexSwitchCheckDefault",1,"form-check-label"],[1,"d-flex","justify-content-center"],["type","button",1,"btn","btn-sm","btn-primary","edit","me-1",3,"click"],[1,"fa","fa-edit"],["type","button",1,"btn","btn-sm","btn-danger","delete",3,"click"],[1,"fa","fa-trash",2,"font-size","24px","color","white"],[1,"alert","alert-danger","mt-1"],[4,"ngIf"],[1,"row","mb-3","pt-3"],[1,"choose-file","w-50","m-auto"],["type","file","id","uploadCaptureInputFile","accept","file_type | audio/* | video/* | image/* | media_type",1,"file","hide_file","bg-white",3,"change"],["for","type",1,"col-form-label","col-sm-2","pt-0"],[1,"col-sm-10","card","w-75"],[1,"fa","fa-remove","text-danger","cursor-pointer","fs-6","remove-file-icon",3,"click"],[1,"preview","bg-warning"],["height","250px",1,"rounded","d-block","w-100",3,"src"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return r.showeModel()}),t.TgZ(3,"i",3),t._uU(4,"\xa0 Add Products "),t.qZA()()()(),t.TgZ(5,"div",4)(6,"div",5)(7,"table",6)(8,"thead")(9,"tr",7)(10,"th"),t._uU(11,"S.n."),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Product Name"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Product Image"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Product Price"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Product Margin"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Product Discription"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Status"),t.qZA(),t.TgZ(24,"th",8),t._uU(25,"Actions"),t.qZA()()(),t.TgZ(26,"tbody",9),t.YNc(27,A,24,8,"tr",10),t.qZA()()()(),t._UZ(28,"br")(29,"br"),t.TgZ(30,"div",11,12)(32,"div",13)(33,"div",14)(34,"div",15)(35,"h4",16),t._UZ(36,"i",17),t._uU(37),t.qZA(),t.TgZ(38,"button",18),t.NdJ("click",function(){return r.closeModel()}),t.TgZ(39,"span",19),t._uU(40,"\xd7"),t.qZA()()(),t.TgZ(41,"div",20)(42,"form",21)(43,"div",22)(44,"div",23)(45,"label",24),t._uU(46,"Product Name"),t.qZA()(),t.TgZ(47,"div",25),t._UZ(48,"input",26),t.qZA(),t.YNc(49,y,3,2,"p",27),t.qZA(),t.TgZ(50,"div",22)(51,"div",23)(52,"label",28),t._uU(53,"Product Price"),t.qZA()(),t.TgZ(54,"div",25),t._UZ(55,"input",29),t.qZA(),t.YNc(56,I,3,2,"p",27),t.qZA(),t.TgZ(57,"div",22)(58,"div",23)(59,"label",30),t._uU(60,"Product Margin"),t.qZA()(),t.TgZ(61,"div",25),t._UZ(62,"input",31),t.qZA(),t.YNc(63,N,3,2,"p",27),t.qZA(),t.TgZ(64,"div",32)(65,"label",33),t._uU(66,"Product Description"),t.qZA()(),t.TgZ(67,"div",32)(68,"textarea",34),t._uU(69,"         "),t.qZA(),t.YNc(70,L,3,2,"p",27),t.qZA(),t.YNc(71,Q,5,0,"div",35),t.YNc(72,Y,6,1,"div",35),t.qZA(),t.TgZ(73,"div",36)(74,"button",37),t.NdJ("click",function(){return r.addProduct()}),t._uU(75),t.qZA(),t.TgZ(76,"button",38),t.NdJ("click",function(){return r.closeModel()}),t._uU(77,"Close"),t.qZA()(),t._UZ(78,"pre",39),t.ALo(79,"json"),t._UZ(80,"br")(81,"br"),t.qZA()()()(),t.TgZ(82,"div",11,40)(84,"div",41)(85,"div",14)(86,"div",15)(87,"h4",16),t._UZ(88,"i",42),t._uU(89," Delete Product"),t.qZA(),t.TgZ(90,"button",18),t.NdJ("click",function(){return r.closeModel()}),t.TgZ(91,"span",19),t._uU(92,"\xd7"),t.qZA()()(),t.TgZ(93,"div",20)(94,"h4"),t._uU(95,"Are you sure want to delete this Product?"),t.qZA(),t.TgZ(96,"p"),t._UZ(97,"br"),t.TgZ(98,"b")(99,"u"),t._uU(100,"Product Details :"),t.qZA()(),t._UZ(101,"br"),t._uU(102),t._UZ(103,"br"),t._uU(104),t._UZ(105,"br"),t._uU(106),t._UZ(107,"br"),t._uU(108),t.qZA()(),t.TgZ(109,"div",36)(110,"button",43),t.NdJ("click",function(){return r.closeModel()}),t._uU(111,"Close"),t.qZA(),t.TgZ(112,"button",38),t.NdJ("click",function(){return r.deleteProduct()}),t._uU(113,"Delete"),t.qZA()()()()()),2&o&&(t.xp6(7),t.Q6J("dtOptions",r.dtOptions)("dtTrigger",r.dtTrigger),t.xp6(20),t.Q6J("ngForOf",r.productsList),t.xp6(3),t.Q6J("config",t.DdM(22,Z)),t.xp6(7),t.hij("\xa0",r.productForm.value._id?"Edit":"Add"," Products"),t.xp6(5),t.Q6J("formGroup",r.productForm),t.xp6(7),t.Q6J("ngIf",r.formError.productname.invalid&&(r.formError.productname.dirty||r.formError.productname.touched)),t.xp6(7),t.Q6J("ngIf",r.formError.productprice.invalid&&(r.formError.productprice.dirty||r.formError.productprice.touched)),t.xp6(7),t.Q6J("ngIf",r.formError.productmargin.invalid&&(r.formError.productmargin.dirty||r.formError.productmargin.touched)),t.xp6(7),t.Q6J("ngIf",r.formError.Productdescription.invalid&&(r.formError.Productdescription.dirty||r.formError.Productdescription.touched)),t.xp6(1),t.Q6J("ngIf",!r.productForm.value.productImg),t.xp6(1),t.Q6J("ngIf",r.productForm.value.productImg),t.xp6(2),t.Q6J("disabled",!r.productForm.valid),t.xp6(1),t.hij("",r.productForm.value._id?"Edit":"Add"," Product"),t.xp6(3),t.Q6J("innerHtml",t.lcZ(79,20,r.productForm.value),t.oJD),t.xp6(4),t.Q6J("config",t.DdM(23,Z)),t.xp6(20),t.hij(" Product Name- ",r.productnfo.productname," "),t.xp6(2),t.hij(" Product Price- ",r.productnfo.productprice," "),t.xp6(2),t.hij(" Product Margin- ",r.productnfo.productmargin," "),t.xp6(2),t.hij(" Product Discription- ",r.productnfo.Productdescription," "))},dependencies:[p.sg,p.O5,c._Y,c.Fj,c.Wl,c.JJ,c.JL,c.On,g.G,m.oB,c.sg,c.u,p.Ts],styles:["body[_ngcontent-%COMP%]{background:#eee}.wrapper[_ngcontent-%COMP%]{margin-top:30px}.card[_ngcontent-%COMP%]{border:1px solid #eee;cursor:pointer}.weight[_ngcontent-%COMP%]{margin-top:-65px;transition:all .5s}.weight[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#e2dede}.buttons[_ngcontent-%COMP%]{padding:10px;background-color:#d6d4d44f;border-radius:4px;position:relative;margin-top:7px;opacity:0;transition:all .8s}.dot[_ngcontent-%COMP%]{height:14px;width:14px;background-color:green;border-radius:50%;position:absolute;left:27%;display:flex;justify-content:center;align-items:center;font-size:8px;color:#fff;opacity:0}.cart-button[_ngcontent-%COMP%]{height:48px}.cart-button[_ngcontent-%COMP%]:focus{box-shadow:none}.cart[_ngcontent-%COMP%]{position:relative;height:48px!important;width:50px;margin-right:8px;display:flex;justify-content:center;align-items:center;background-color:#fff;padding:11px;border-radius:5px;font-size:14px;transition:1s ease-in-out;overflow:hidden}.cart-button.clicked[_ngcontent-%COMP%]   span.dot[_ngcontent-%COMP%]{animation:item .3s ease-in forwards}@keyframes item{0%{opacity:1;top:30%;left:30%}25%{opacity:1;left:26%;top:0%}50%{opacity:1;left:23%;top:-22%}75%{opacity:1;left:19%;top:-18%}to{opacity:1;left:14%;top:28%}}.card[_ngcontent-%COMP%]:hover   .buttons[_ngcontent-%COMP%]{opacity:1}.card[_ngcontent-%COMP%]:hover   .weight[_ngcontent-%COMP%]{margin-top:10px}.card[_ngcontent-%COMP%]:hover{transform:scale(1.04);z-index:2;overflow:hidden}.remove-file-icon[_ngcontent-%COMP%]{position:absolute;right:13px;z-index:999;top:8px;width:32px;height:32px;background:white;border:5px solid red;border-radius:50%;text-align:center;align-items:center;display:flex;justify-content:center}.choose-file[_ngcontent-%COMP%]{padding:5px 10px;background:#688c08;border:1px solid #688c08;position:relative;color:#fff;border-radius:2px;text-align:center;cursor:pointer}.hide_file[_ngcontent-%COMP%]{position:absolute;z-index:1000;opacity:0;right:0;top:0;font-size:24px;cursor:pointer;bottom:0;left:0}"]}),e})()}];let D=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[l.Bz.forChild(S),l.Bz]}),e})(),j=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.ez,D,f.eY,c.UX]}),e})()}}]);